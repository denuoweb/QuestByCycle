{% extends "layout.html" %}

{% block content %}
<h1>Upcoming Events</h1>

{% for event in events %}
    <div class="event">
        <h2>{{ event.title }}</h2>
        <p>{{ event.description }}</p>
        <p><strong>Start Date:</strong> {{ event.start_date.strftime("%Y-%m-%d %H:%M") }}</p>
        <p><strong>End Date:</strong> {{ event.end_date.strftime("%Y-%m-%d %H:%M") }}</p>
        
        <!-- Link to event detail page -->
        <a href="{{ url_for('events.event_detail', event_id=event.id) }}">View Event Details</a>
        
        {% if event.tasks %}
            <h3>Tasks:</h3>
            <ul>
                {% for task in event.tasks %}
                    <li>
                        <strong>{{ task.title }}</strong> - {{ task.description }}
                        {% if task.completed %}
                            <span>(Completed)</span>
                        {% endif %}
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p>No tasks for this event.</p>
        {% endif %}
    </div>
{% endfor %}
{% endblock %}
