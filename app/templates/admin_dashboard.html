{% extends "layout.html" %}

{% block title %}Admin Dashboard{% endblock %}

{% block content %}
<h1>Admin Dashboard</h1>
<div>Welcome, {{ current_user.username }}! This is the admin dashboard.</div>

<div><a href="{{ url_for('games.create_game') }}" class="btn btn-primary">Create New Game</a></div>
<div><a href="{{ url_for('admin.user_management') }}" class="btn btn-secondary">Manage Users</a></div>
<div class="game-list">
    {% for game in games %}
        <div class="game">
            <h2>{{ game.title }}</h2>
            <p>{{ game.description }}</p>
            <a href="{{ url_for('games.update_game', game_id=game.id) }}" class="btn btn-info">Edit Game</a>
            <form action="{{ url_for('games.delete_game', game_id=game.id) }}" method="post" onsubmit="return confirm('Are you sure you want to delete this game?');">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                <button type="submit" class="btn btn-danger">Delete Game</button>
            </form>
            <a href="{{ url_for('tasks.manage_game_tasks', game_id=game.id) }}" class="btn btn-primary">Config Tasks</a>
        </div>
    {% else %}
        <p>No games found.</p>
    {% endfor %}
</div>
{% endblock %}