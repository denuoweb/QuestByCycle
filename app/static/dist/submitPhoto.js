import{s as u,h as c}from"./chunk-BU1GfmET.js";document.addEventListener("DOMContentLoaded",function(){const o=document.getElementById("submitPhotoForm");if(!o){console.error("submitPhotoForm element not found on page.");return}let t=!1;o.addEventListener("submit",function(i){if(i.preventDefault(),t)return;t=!0;const r=o.querySelector('input[name="photo"]'),s=r?r.files[0]:null;if(s&&s.type.startsWith("video/")&&s.size>10*1024*1024){n("Video must be 10 MB or smaller.","error"),t=!1;return}if(s&&s.type.startsWith("image/")&&s.size>8*1024*1024){n("Image must be 8 MB or smaller.","error"),t=!1;return}u();const a=new FormData(o),l=getCSRFToken();a.append("csrf_token",l),fetch(o.action,{method:"POST",body:a,credentials:"same-origin",headers:{"X-CSRF-Token":l}}).then(e=>e.ok?e.json():e.json().then(m=>{throw new Error(m.message)})).then(e=>{e.success?(n(e.message,"success"),window.location.href=e.redirect_url):n(e.message,"error")}).catch(e=>{console.error("Submission error:",e),n("Error during submission: "+e.message,"error")}).finally(()=>{t=!1,c()})});function n(i,r){const s=document.getElementById("flash-messages");s?s.innerHTML=`
                <div class="flash-message ${r}">
                    ${i}
                </div>
            `:console.warn("Flash messages container not found.")}});
