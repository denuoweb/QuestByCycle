import{l as a,s as f,g as c,h as g}from"./chunk-Bu8AA3up.js";function u(){const t=document.getElementById("submitPhotoForm");if(!t){a.error("submitPhotoForm element not found on page.");return}let o=!1;t.addEventListener("submit",function(i){if(i.preventDefault(),o)return;o=!0;const r=t.querySelector('input[name="photo"]'),s=r?r.files[0]:null;if(s&&s.type.startsWith("video/")&&s.size>10*1024*1024){n("Video must be 10 MB or smaller.","error"),o=!1;return}if(s&&s.type.startsWith("image/")&&s.size>8*1024*1024){n("Image must be 8 MB or smaller.","error"),o=!1;return}f();const l=new FormData(t),m=c();l.append("csrf_token",m),fetch(t.action,{method:"POST",body:l,credentials:"same-origin",headers:{"X-CSRF-Token":m}}).then(e=>e.ok?e.json():e.json().then(d=>{throw new Error(d.message)})).then(e=>{e.success?(n(e.message,"success"),window.location.href=e.redirect_url):n(e.message,"error")}).catch(e=>{a.error("Submission error:",e),n("Error during submission: "+e.message,"error")}).finally(()=>{o=!1,g()})});function n(i,r){const s=document.getElementById("flash-messages");s?s.innerHTML=`
                <div class="flash-message ${r}">
                    ${i}
                </div>
            `:a.warn("Flash messages container not found.")}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",u):u();
