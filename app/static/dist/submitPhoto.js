import{l as m,a as c,c as f,h as g}from"./chunk-DfIU-FO0.js";function d(){const t=document.getElementById("submitPhotoForm");if(!t){m.error("submitPhotoForm element not found on page.");return}let s=!1;t.addEventListener("submit",function(l){if(l.preventDefault(),s)return;s=!0;const r=t.querySelector('input[name="photo"]'),e=r?r.files[0]:null;if(e&&e.type.startsWith("video/")&&e.size>25*1024*1024){o("Video must be 25 MB or smaller.","error"),s=!1;return}if(e&&e.type.startsWith("image/")&&e.size>8*1024*1024){o("Image must be 8 MB or smaller.","error"),s=!1;return}c();const n=new FormData(t);f(t.action,{method:"POST",body:n}).then(({status:a,json:i})=>{if(a===200&&i.success)o(i.message,"success"),window.location.href=i.redirect_url;else{const u=i.message||"Upload failed";o(u,"error")}}).catch(a=>{m.error("Submission error:",a),o("Error during submission: "+a.message,"error")}).finally(()=>{s=!1,g()})});function o(l,r){const e=document.getElementById("flash-messages");if(e){e.innerHTML="";const n=document.createElement("div");n.className=`flash-message ${r}`,n.textContent=l,e.appendChild(n)}else m.warn("Flash messages container not found.")}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",d):d();
