import{l as a,s as f,g as c,h as d}from"./chunk-Bu8AA3up.js";document.addEventListener("DOMContentLoaded",function(){const t=document.getElementById("submitPhotoForm");if(!t){a.error("submitPhotoForm element not found on page.");return}let o=!1;t.addEventListener("submit",function(i){if(i.preventDefault(),o)return;o=!0;const n=t.querySelector('input[name="photo"]'),s=n?n.files[0]:null;if(s&&s.type.startsWith("video/")&&s.size>10*1024*1024){r("Video must be 10 MB or smaller.","error"),o=!1;return}if(s&&s.type.startsWith("image/")&&s.size>8*1024*1024){r("Image must be 8 MB or smaller.","error"),o=!1;return}f();const l=new FormData(t),m=c();l.append("csrf_token",m),fetch(t.action,{method:"POST",body:l,credentials:"same-origin",headers:{"X-CSRF-Token":m}}).then(e=>e.ok?e.json():e.json().then(u=>{throw new Error(u.message)})).then(e=>{e.success?(r(e.message,"success"),window.location.href=e.redirect_url):r(e.message,"error")}).catch(e=>{a.error("Submission error:",e),r("Error during submission: "+e.message,"error")}).finally(()=>{o=!1,d()})});function r(i,n){const s=document.getElementById("flash-messages");s?s.innerHTML=`
                <div class="flash-message ${n}">
                    ${i}
                </div>
            `:a.warn("Flash messages container not found.")}});
